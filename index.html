<!DOCTYPE html>
<html>

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous" />
    <title>Hello, world!</title>
    <link rel="stylesheet" href="style.css" />
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light nav-distance">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">나와 닮은 포켓몬</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="#">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Link</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
								Dropdown
							</a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" href="#">Action</a></li>
                            <li><a class="dropdown-item" href="#">Another action</a></li>
                            <li>
                                <hr class="dropdown-divider" />
                            </li>
                            <li><a class="dropdown-item" href="#">Something else here</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Disabled</a
							>
						</li>
					</ul>
					<form class="d-flex">
						<input
							class="form-control me-2"
							type="search"
							placeholder="Search"
							aria-label="Search"
						/>
						<button class="btn btn-outline-success" type="submit">Search</button>
					</form>
				</div>
			</div>
		</nav>
		<section class="section">
			<h1 class="title">나와 닮은 포켓몬을 알아보자</h1>
			<h5 class="guidefont">
				배경과 색 등에 따라 상이한 결과가 나올 수 있습니다.
			</h5>
		</section>
		<section class="youtube">
			<div class="youtube-cover">
				<a
					href="https://www.youtube.com/channel/UCQNE2JmbasNYbjGAcuBiRRg"
					class="youtube-link"
					style="text-decoration: none;"
					>도움 : 조코딩</a
				>
			</div>
		</section>
		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW"
			crossorigin="anonymous"
		></script>

		<script
			src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"
			integrity="sha384-q2kxQ16AaE6UbzuKqyBE9/u/KzioAlnx2maXQHiDX9d4/zp8Ok3f+M7DPm+Ib6IU"
			crossorigin="anonymous"
		></script>
		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.min.js"
			integrity="sha384-pQQkAEnwaBkjpqZ8RU1fF1AKtTcHJwFl3pblpTlHXybJjHpMYo79HY3hIi4NKxyj"
			crossorigin="anonymous"
		></script>

		<script
			class="jsbin"
			src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"
		></script>
		<div class="mt-5 container file-upload">
			<div class="image-upload-wrap">
				<input
					class="file-upload-input"
					type="file"
					onchange="readURL(this);"
					accept="image/*"
				/>
				<div class="drag-text">
					<h3 class="upload-text">얼굴 사진을 올려놓거나 업로드하세요</h3>
				</div>
			</div>
			<div class="file-upload-content">
				<img class="file-upload-image" id="face-image" src="#" alt="your image" />
				<h3>
					당신과 닮은 포켓몬은 :
				</h3>
				<b>
					<p class="result-messege" id="Messege"></p>
				</b>
				<p class="guide-font"></p>
				<img src="" class="pokemon-image" id="original-image" />
				<div id="label-container"></div>
				<div class="image-title-wrap">
					<button type="button" onclick="removeUpload()" class="remove-image">
						다시 시도<span class="image-title"></span>
					</button>
				</div>
			</div>
		</div>
		<div id="webcam-container"></div>
		<script>
			function readURL(input) {
				if (input.files && input.files[0]) {
					var reader = new FileReader();

					reader.onload = function (e) {
						$('.image-upload-wrap').hide();

						$('.file-upload-image').attr('src', e.target.result);
						$('.file-upload-content').show();

						$('.image-title').html(input.files[0].name);
					};
					reader.readAsDataURL(input.files[0]);
					init().then(function () {
						console.log('Hello');
						predict();
					});
				} else {
					removeUpload();
				}
			}

			function removeUpload() {
				$('.file-upload-input').replaceWith($('.file-upload-input').clone());
				$('.file-upload-content').hide();
				$('.image-upload-wrap').show();
			}
			$('.image-upload-wrap').bind('dragover', function () {
				$('.image-upload-wrap').addClass('image-dropping');
			});
			$('.image-upload-wrap').bind('dragleave', function () {
				$('.image-upload-wrap').removeClass('image-dropping');
			});
		</script>
		<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.3.1/dist/tf.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>
		<script type="text/javascript">
			// More API functions here:
			// https://github.com/googlecreativelab/teachablemachine-community/tree/master/libraries/image

			// the link to your model provided by Teachable Machine export panel
			const URL = 'https://teachablemachine.withgoogle.com/models/1sRDrkAGc/';

			let model, webcam, labelContainer, maxPredictions;

			// Load the image model and setup the webcam
			async function init() {
				const modelURL = URL + 'model.json';
				const metadataURL = URL + 'metadata.json';

				// load the model and metadata
				// Refer to tmImage.loadFromFiles() in the API to support files from a file picker
				// or files from your local hard drive
				// Note: the pose library adds "tmImage" object to your window (window.tmImage)
				model = await tmImage.load(modelURL, metadataURL);
				maxPredictions = model.getTotalClasses();
				labelContainer = document.getElementById('label-container');
				for (let i = 0; i < maxPredictions; i++) {
					// and class labels
					/*belContainer.appendChild(document.createElement('div'));*/
				}
			}

			// run the webcam image through the image model
			async function predict() {
				// predict can take in an image, video or canvas html element
				var image = document.getElementById('face-image');
				const prediction = await model.predict(image, false);
				prediction.sort((a, b) => parseFloat(b.probability) - parseFloat(a.probability));
				console.log(prediction[0].className);
				var resultMessege;
				var guidefont;
				var pokemonimage;
				switch (prediction[0].className) {
					case 'Charmander':
						resultMessege = '파이리';
						guidefont =
							'도감 : 불꽃 타입<br>뜨거운 것을 좋아하는 성격이다.<br>꼬리에 있는 불꽃은 생명을 나타내는 표시로 건강하면 강한 불꽃이 나오고 건강하지 않으면 약한 불꽃이 나온다. ';
						var a =
							'charmander.png';
						pokemonimage = jQuery('#original-image').attr('src', a);
						break;
					case 'Rattata':
						resultMessege = '꼬렛';
						guidefont =
							'도감 : 노말 타입<br>크고 날카로운 이빨은 언제나 자라기 때문에 딱딱한 물건을 갉아먹는다.<br>또 잡식성인 꼬렛은 먹이나 살수있는 환경이라면 언제나 번식을 한다. ';
						var b =
							'rattata.png';
						pokemonimage = jQuery('#original-image').attr('src', b);
						break;

					case 'Squirtle':
						resultMessege = '꼬부기';
						guidefont =
							'도감 : 물 타입<br> 꼬마 거북이 포켓몬.딱딱한 등껍질은 여러모로 쓸모가 많다.<br>일단 몸을 지키는 것도 있지만 반격을 할 때 더 효과가 좋다고 한다.';
						var c =
							'Squirtle.png';
						pokemonimage = jQuery('#original-image').attr('src', c);
						break;
					case 'Abra':
						resultMessege = '캐이시';
						guidefont =
							'도감 : 에스퍼 타입<br>하루에 18시간은 자고 있다. 자는 동안에도 다양한 초능력을 사용한다.<br>상대의 생각을 읽어내서 위기에 몰리기 전에 순간이동로 도망쳐버린다.';
						var d =
							'abra.png';
						pokemonimage = jQuery('#original-image').attr('src', d);
						break;
					case 'Magikarp':
						resultMessege = '잉어킹';
						guidefont =
							'도감 : 물 타입<br>힘도 스피드도 거의 없다. 세상에서 가장 약하고 한심한 포켓몬이다.<br>힘도 스피드도 거의 없다. 세상에서 가장 약하고 한심한 포켓몬이다<br>힘도 스피드도 거의 없다. 세상에서 가장 약하고 한심한 포켓몬이다.힘도 스피드도 거의 없다. 세상에서 가장 약하고 한심한 포켓몬이다.';
						var e =
							'king.png';
						pokemonimage = jQuery('#original-image').attr('src', e);
						break;
					case 'Machop':
						resultMessege = '알통몬';
						guidefont =
							'도감 : 격투 타입<br>온몸이 근육으로 되어있으며, 크기는 어린아이만하지만 어른 100명을 집어던질 수 있다.';
						var f =
							'machop.png';
						pokemonimage = jQuery('#original-image').attr('src', f);
						break;
					case 'Meowth':
						resultMessege = '나옹';
						guidefont =
							'도감 : 노말 타입<br> 낮에는 잠을 자고 밤이 되면 눈을 빛내며 주변을 돌아다니는 야행성 포켓몬.<br>날카로운 손톱을 세우고 살금살금 다녀 발자국을 남기지 않고 걷는다.';
						var g =
							'meowth.png';
						pokemonimage = jQuery('#original-image').attr('src', g);
						break;
					case 'Snorlax':
						resultMessege = '잠만보';
						guidefont =
							'도감 : 노말 타입<br>하루에 먹을 것을 400kg 먹지 않으면 성에 차지 않는다. 다 먹으면 잠이 들어 버린다.';
						var h =
							'snorlax.png';
						pokemonimage = jQuery('#original-image').attr('src', h);
						break;
					case 'Eevee':
						resultMessege = '이브이';
						guidefont =
							'도감 : 노말 타입<br>불규칙한 유전자를 가졌다. 돌에서 나오는 방사선에 의해 몸이 갑자기 변이를 일으킨다.';
						var i =
							'eevee.png';
						pokemonimage = jQuery('#original-image').attr('src', i);
						break;
					case 'Mr. Mime':
						resultMessege = '마임맨';
						guidefont =
							'도감 : 에스퍼 타입<br>사람 속이기를 잘한다. 팬터마임으로 만든 벽이 정말로 나타난다고 한다.';
						var v =
							'mr.png';
						pokemonimage = jQuery('#original-image').attr('src', v);
						break;
					case 'Ponyta':
						resultMessege = '포니타';
						guidefont =
							'도감 : 불꽃 타입<br> 몸이 가볍고 다리의 힘이 굉장하다. 한 번 점프하면 도쿄타워도 넘을 수 있다.';
						var k =
                            'ponyta.png';
                            //
						pokemonimage = jQuery('#original-image').attr('src', k);
						break;
					case 'Growlithe':
						resultMessege = '가디';
						guidefont =
							'도감 : 불꽃 타입<br> 사람을 잘 따르는 충실한 성격이다. 적에게는 짖거나 물며 쫓아내려고 한다.';
						var l =
							'grow.png';
						pokemonimage = jQuery('#original-image').attr('src', l);
						break;
					case 'Bulbasaur':
						resultMessege = '이상해씨';
						guidefont =
							'도감 : 풀 , 독 타입<br>태어날 때부터 등에 있는 이상한 씨앗과 함께 성장하며 자란다. 이상해씨는 며칠 동안 굶어도 이상이 없는데, 그 이유는 씨앗에 영양분이 가득해 진화하기 전까지 등에 자라는 씨앗에서 영양분을 얻을 수 있기 때문이다.';
						var m =
							'bulbasaur.png';
						pokemonimage = jQuery('#original-image').attr('src', m);
						break;
					case 'Seel':
						resultMessege = '쥬쥬';
						guidefont =
							'도감 : 물 타입<br>하늘색의 털로 뒤덮인 피부는 두껍고 튼튼하다. 영하 40도라도 활동할 수 있다.<br>머리에 튀어나온 뿔은 매우 단단하다. 박치기로 빙산을 깨고 앞으로 나아간다.';
						var n =
							'seel.png';
						pokemonimage = jQuery('#original-image').attr('src', n);
						break;
					case 'Dratini':
						resultMessege = '미뇽';
						guidefont =
							'도감 : 드래곤 타입<br>새끼도 몸길이가 2미터 이상이다. 탈피를 거듭해서 몸집이 커진다.<br>오랫동안 환상의 포켓몬이라 불렸다. 물속에 산다는 사실이 겨우 밝혀졌다.';
						var o =
							'dratini.png';
						pokemonimage = jQuery('#original-image').attr('src', o);
						break;
					case 'Horsea':
						resultMessege = '쏘드라';
						guidefont =
							'도감 : 물 타입<br>태엽처럼 동그랗게 말린 꼬리로 몸의 균형을 잡는다. 주둥이에서 먹물을 뿜기도 한다.';
						var p =
							'Horsea.png';
						pokemonimage = jQuery('#original-image').attr('src', p);
						break;
					case 'Pikachu':
						resultMessege = '피카츄';
						guidefont =
							'도감 : 전기 타입<br>붉은 뺨은 전기 주머니이다. 이 전기 주머니에 전기를 모아 자신을 위협하는 천적들을 물리친다.';
						var q =
							'pokachu.png';
						pokemonimage = jQuery('#original-image').attr('src', q);
						break;
					//
					case 'Ditto':
						resultMessege = '메타몽';
						guidefont =
							'도감 : 노말 타입<br>몸의 세포 구성을 스스로 바꿔서 다른 생명체로 변신한다.<br>메타몽끼리 마주치면 상대와 똑같은 모습이 되려고 평소보다 격렬하게 움직인다.';
						var r =
							'ditto.png';
						pokemonimage = jQuery('#original-image').attr('src', r);
						break;
					case 'Vulpix':
						resultMessege = '식스테일';
						guidefont =
							'도감 : 불꽃 타입<br>	어리지만 6개의 꼬리가 아름답다.성장하면서 끝이 갈라지고 색이 생겨서 6개로 늘어난다.<br>털결이 부드럽고 곱슬거린다.';
						var s =
							'sixtail.png';
						pokemonimage = jQuery('#original-image').attr('src', s);
						break;
					case 'Mew':
						resultMessege = '뮤';
						guidefont =
							'도감 : 에스퍼 타입<br> 남아메리카에 서식하고 있는 절멸되었을 포켓몬. 지능이 높아 어떤 것이라도 습득한다.지금도 환상의 포켓몬이라고 전해진다. 그 모습을 본 자는 전국에서 한 명도 없다.<br><del>너의 애인같이...ㅋ</del>';
						var t =
							'mew.png';
						pokemonimage = jQuery('#original-image').attr('src', t);
						break;
					case 'Exeggcute':
						resultMessege = '아라리';
						guidefont =
							'도감 : 풀 , 에스퍼 타입<br> 무언가의 알 같지만 실은 식물의 씨앗에 가까운 생물이라는 사실이 드러났다.<br>알 하나하나가 서로를 끌어당겨서 회전하고 있다. 6개가 아니면 안정되지 않는다.';
						var u =
							'arari.png';
						pokemonimage = jQuery('#original-image').attr('src', u);
						break;
					case 'Jigglypuff':
						resultMessege = '푸린';
						guidefont =
							'도감 :  노말 타입 <br>둥글고 커다란 눈으로 상대를 유인해서 기분 좋은 노래를 들려주어 잠들게 한다.';
						var j =
							'j.png';
						pokemonimage = jQuery('#original-image').attr('src', j);
						break;
					default:
						resultMessege = '알 수 없음';
				}
				$('.result-messege').html(resultMessege);
				$('.guide-font').html(guidefont);
				$('.pokemon-image').html(pokemonimage);
				var water = ['Squirtle', 'Magikarp', 'Seel', 'Horsea'];
				var fire = ['Charmander', 'Ponyta', 'Growlithe', 'Vulpix'];
				var normal = ['Rattata', 'Meowth', 'Eevee', 'Snorlax', 'Jigglypuff', 'Ditto'];
				var Esper = ['Abra', 'Mew', 'Mr. Mime'];
				var grass = ['Bulbasaur', 'Exeggcute'];
				var Electricity = ['Pikachu'];
				var dragon = ['Dratini'];
				var i = water.includes(prediction[0].className);
				var a = fire.includes(prediction[0].className);
				var x = normal.includes(prediction[0].className);
				var y = grass.includes(prediction[0].className);
				var z = Electricity.includes(prediction[0].className);
                var b = dragon.includes(prediction[0].className);
                var c = Esper.includes(prediction[0].className);
				if (i) {
					document.getElementById('Messege').style.color = 'blue';
				} else if (a) {
					document.getElementById('Messege').style.color = 'red';
				} else if (x) {
					//pass
				} else if (y) {
					document.getElementById('Messege').style.color = 'green';
				} else if (z) {
					document.getElementById('Messege').style.color = 'yellow';
				} else if (b) {
					document.getElementById('Messege').style.color = 'skyblue';
				} else if (c) {
                    document.getElementById('Messege').style.color = 'violet';
                }
				for (let i = 0; i < maxPredictions; i++) {
					const classPrediction =
						prediction[i].className + ': ' + prediction[i].probability.toFixed(2);
					labelContainer.childNodes[i].innerHTML = classPrediction;
				}
			}
		</script>
		<!-- Go to www.addthis.com/dashboard to customize your tools -->
		<script
			type="text/javascript"
			src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5fe0920a0c0f8a0b"
		></script>
	</body>
</html>